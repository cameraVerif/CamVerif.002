from z3 import *




xp, yp, zp  = Reals('xp yp zp')
p, q, r = Reals('p q r')
x, y, z = Reals('x y z')

initCubeCon = And(10*xp>=1,100*xp<=11,10*yp>=45,100*yp<=451, 10*zp>=1215,100*zp<=12151)

#  1,16,115,  -1,4,115, 16,4,115, 
  
s = Solver()






cons1 = ( (((-68.39567*(x -xp) )/ (z -zp) )+ 24.5 ) == 49 )
# cons6 = ( (((-68.39567*(x -xp) )/ (z -zp) )+ 24.5 ) >= 49 )

cons2 =  ( (((68.39567*(y -yp) )/ (z -zp) )+ 24.5 ) == 0 )

cons3 = And(p>=0,p<=1,q>=0,q<=1,r>=0,r<=1)
cons4 = And(p+q+r==1)


cons5 = And(x == p*1 + q*-1+ r*16, y == p*16 + q*4+ r*4, z == p*115 + q*115+ r*115)


cons6 = Exists([x,y,z,p ,q,r], And(cons1,cons2,cons3,cons4,cons5, initCubeCon))

# s.add(cons6)

# print(s.check())

# print(s.model())

# g  = Goal()
# g.add((cons6))

# t1 = Tactic('simplify')
# t2 = Tactic('qe')
# t3 = Tactic('qe2')
# t  = Then( t2,t3, t1)
# print("after elimination")
# print (t(g)[0][0])

# cons4 = Exists([x,y,z,p ,q,r], And(cons1,cons2,And(x>=0,x<=1,y>=0,y<=1,z>=0,z<=1)))


x0, x1, x2 = Reals('x0 x1 x2')
s2 = Solver()
# cons21 = And(-312187500000000000*x0-111828358208955227*x2+16751538596082089929>=0, -1248750000000000000*x1-429055741699665007*x2+57868322608894312373>=0, x2-116>=0, 104062500000000000*x1+37276119402985079*x2-4997329757462687149>=0, -x2+1115>=0, 2497500000000000000*x0+894626865671641903*x2-101561893656716430773>=0)

cons21 = And(x2-116>=0, -156093750000000000*x0-55914179104477621*x2+8927630597014926767>=0, -624375000000000000*x1+50208650624428877*x2-3276494821809320695>=0, -x2+1115>=0, 1248750000000000000*x0+447313432835820965*x2-50192294776119410791>=0, 208125000000000000*x1-13693268352116969*x2+742225860493451515>=0)


cons23 = And(x0 == 0.1, x1 == 4.5, x2 == 121.5)

s2.add(cons21)
s2.add(cons23)
# print(simplify(cons21))

print(s2.check())

